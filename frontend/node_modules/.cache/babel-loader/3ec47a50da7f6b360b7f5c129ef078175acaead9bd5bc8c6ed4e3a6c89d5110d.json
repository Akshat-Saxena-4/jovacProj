{"ast":null,"code":"import{useState}from'react';import{login,register,setToken}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AuthModal(_ref){let{onAuthenticated}=_ref;const[isLoginMode,setIsLoginMode]=useState(true);const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');// Form Fields\nconst[username,setUsername]=useState('');const[password,setPassword]=useState('');const[firstName,setFirstName]=useState('');const[lastName,setLastName]=useState('');const[email,setEmail]=useState('');async function handleSubmit(e){e.preventDefault();setLoading(true);setMessage('');try{if(isLoginMode){const data=await login(username,password);if(data!==null&&data!==void 0&&data.token){setToken(data.token);onAuthenticated();}else{setMessage((data===null||data===void 0?void 0:data.message)||'Login failed.');}}else{// Pass all new fields to the register function\nawait register(username,password,email,firstName,lastName);setMessage('Registration successful! Please login.');setIsLoginMode(true);// Optional: clear registration specific fields\nsetFirstName('');setLastName('');setEmail('');}}catch(err){setMessage(err.message||'Server error.');}finally{setLoading(false);}}const toggleMode=()=>{setIsLoginMode(!isLoginMode);setMessage('');};// Reusable input style class (assuming 'input-field' is defined in your global CSS, \n// otherwise replace with: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border\"\nconst inputClassName=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2\";return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-6 text-center\",children:isLoginMode?'Welcome Back':'Create Account'}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 rounded text-sm \".concat(message.includes('success')?'bg-green-100 text-green-700':'bg-red-100 text-red-700'),children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[!isLoginMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:inputClassName,value:firstName,onChange:e=>setFirstName(e.target.value),required:!isLoginMode})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:inputClassName,value:lastName,onChange:e=>setLastName(e.target.value)})]})]}),!isLoginMode&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:inputClassName,value:email,onChange:e=>setEmail(e.target.value),required:!isLoginMode})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:inputClassName,value:username,onChange:e=>setUsername(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:inputClassName,value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:loading?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Processing...\"]}):isLoginMode?'Sign In':'Create Account'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-center text-sm text-gray-600\",children:[isLoginMode?\"Don't have an account?\":'Already have an account?',' ',/*#__PURE__*/_jsx(\"button\",{onClick:toggleMode,className:\"font-medium text-blue-600 hover:text-blue-500 focus:outline-none underline decoration-transparent hover:decoration-blue-600 transition-all\",children:isLoginMode?'Register now':'Log in'})]})]})});}","map":{"version":3,"names":["useState","login","register","setToken","jsx","_jsx","jsxs","_jsxs","AuthModal","_ref","onAuthenticated","isLoginMode","setIsLoginMode","loading","setLoading","message","setMessage","username","setUsername","password","setPassword","firstName","setFirstName","lastName","setLastName","email","setEmail","handleSubmit","e","preventDefault","data","token","err","toggleMode","inputClassName","className","children","concat","includes","onSubmit","type","value","onChange","target","required","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","onClick"],"sources":["/home/stuban/Downloads/Minor project/frontend/src/components/AuthModal.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { login, register, setToken } from '../api';\n\nexport default function AuthModal({ onAuthenticated }) {\n    const [isLoginMode, setIsLoginMode] = useState(true);\n    const [loading, setLoading] = useState(false);\n    const [message, setMessage] = useState('');\n\n    // Form Fields\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [firstName, setFirstName] = useState('');\n    const [lastName, setLastName] = useState('');\n    const [email, setEmail] = useState('');\n\n    async function handleSubmit(e) {\n        e.preventDefault();\n        setLoading(true);\n        setMessage('');\n        try {\n            if (isLoginMode) {\n                const data = await login(username, password);\n                if (data?.token) {\n                    setToken(data.token);\n                    onAuthenticated();\n                } else {\n                    setMessage(data?.message || 'Login failed.');\n                }\n            } else {\n                // Pass all new fields to the register function\n                await register(username, password, email, firstName, lastName);\n                setMessage('Registration successful! Please login.');\n                setIsLoginMode(true);\n                // Optional: clear registration specific fields\n                setFirstName('');\n                setLastName('');\n                setEmail('');\n            }\n        } catch (err) {\n            setMessage(err.message || 'Server error.');\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    const toggleMode = () => {\n        setIsLoginMode(!isLoginMode);\n        setMessage('');\n    };\n\n    // Reusable input style class (assuming 'input-field' is defined in your global CSS, \n    // otherwise replace with: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2 border\"\n    const inputClassName = \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2\";\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm\">\n            <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto\">\n                <h2 className=\"text-2xl font-bold text-gray-800 mb-6 text-center\">\n                    {isLoginMode ? 'Welcome Back' : 'Create Account'}\n                </h2>\n                \n                {message && (\n                    <div className={`mb-4 p-3 rounded text-sm ${message.includes('success') ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\n                        {message}\n                    </div>\n                )}\n\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    {!isLoginMode && (\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700\">First Name</label>\n                                <input\n                                    type=\"text\"\n                                    className={inputClassName}\n                                    value={firstName}\n                                    onChange={e => setFirstName(e.target.value)}\n                                    required={!isLoginMode}\n                                />\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700\">Last Name</label>\n                                <input\n                                    type=\"text\"\n                                    className={inputClassName}\n                                    value={lastName}\n                                    onChange={e => setLastName(e.target.value)}\n                                />\n                            </div>\n                        </div>\n                    )}\n\n                    {!isLoginMode && (\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700\">Email</label>\n                            <input\n                                type=\"email\"\n                                className={inputClassName}\n                                value={email}\n                                onChange={e => setEmail(e.target.value)}\n                                required={!isLoginMode}\n                            />\n                        </div>\n                    )}\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700\">Username</label>\n                        <input\n                            type=\"text\"\n                            className={inputClassName}\n                            value={username}\n                            onChange={e => setUsername(e.target.value)}\n                            required\n                        />\n                    </div>\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700\">Password</label>\n                        <input\n                            type=\"password\"\n                            className={inputClassName}\n                            value={password}\n                            onChange={e => setPassword(e.target.value)}\n                            required\n                        />\n                    </div>\n\n                    <button\n                        type=\"submit\"\n                        disabled={loading}\n                        className=\"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                    >\n                        {loading ? (\n                            <span className=\"flex items-center\">\n                                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                                </svg>\n                                Processing...\n                            </span>\n                        ) : (isLoginMode ? 'Sign In' : 'Create Account')}\n                    </button>\n                </form>\n\n                <div className=\"mt-6 text-center text-sm text-gray-600\">\n                    {isLoginMode ? \"Don't have an account?\" : 'Already have an account?'}{' '}\n                    <button\n                        onClick={toggleMode}\n                        className=\"font-medium text-blue-600 hover:text-blue-500 focus:outline-none underline decoration-transparent hover:decoration-blue-600 transition-all\"\n                    >\n                        {isLoginMode ? 'Register now' : 'Log in'}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}