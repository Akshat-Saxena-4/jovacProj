{"ast":null,"code":"import{useState}from'react';import{login,register,setToken}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AuthModal(_ref){let{onAuthenticated}=_ref;const[isLoginMode,setIsLoginMode]=useState(true);const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[message,setMessage]=useState('');async function handleSubmit(e){e.preventDefault();setLoading(true);setMessage('');try{if(isLoginMode){const data=await login(username,password);if(data!==null&&data!==void 0&&data.token){setToken(data.token);onAuthenticated();}else{setMessage((data===null||data===void 0?void 0:data.message)||'Login failed.');}}else{await register(username,password);setMessage('Registration successful! Please login.');setIsLoginMode(true);}}catch(err){setMessage('Server error.');}finally{setLoading(false);}}return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 flex items-center justify-center bg-black/50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl w-full max-w-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:isLoginMode?'Login':'Register'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"mt-1 input-field\",placeholder:\"Username\",value:username,onChange:e=>setUsername(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"mt-1 input-field\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn-primary w-full py-2 rounded-full font-semibold\",children:loading?'Please wait...':isLoginMode?'Login':'Register'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-sm text-gray-500\",children:[isLoginMode?\"Don't have an account?\":'Already have an account?',' ',/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLoginMode(m=>!m),className:\"text-blue-600 font-semibold\",children:isLoginMode?'Register':'Login'})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-sm text-gray-700\",children:message})]})});}","map":{"version":3,"names":["useState","login","register","setToken","jsx","_jsx","jsxs","_jsxs","AuthModal","_ref","onAuthenticated","isLoginMode","setIsLoginMode","username","setUsername","password","setPassword","loading","setLoading","message","setMessage","handleSubmit","e","preventDefault","data","token","err","className","children","onSubmit","type","placeholder","value","onChange","target","required","disabled","onClick","m"],"sources":["/home/stuban/Downloads/Minor project/frontend/src/components/AuthModal.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { login, register, setToken } from '../api';\n\nexport default function AuthModal({ onAuthenticated }) {\n\tconst [isLoginMode, setIsLoginMode] = useState(true);\n\tconst [username, setUsername] = useState('');\n\tconst [password, setPassword] = useState('');\n\tconst [loading, setLoading] = useState(false);\n\tconst [message, setMessage] = useState('');\n\n\tasync function handleSubmit(e) {\n\t\te.preventDefault();\n\t\tsetLoading(true);\n\t\tsetMessage('');\n\t\ttry {\n\t\t\tif (isLoginMode) {\n\t\t\t\tconst data = await login(username, password);\n\t\t\t\tif (data?.token) {\n\t\t\t\t\tsetToken(data.token);\n\t\t\t\t\tonAuthenticated();\n\t\t\t\t} else {\n\t\t\t\t\tsetMessage(data?.message || 'Login failed.');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tawait register(username, password);\n\t\t\t\tsetMessage('Registration successful! Please login.');\n\t\t\t\tsetIsLoginMode(true);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetMessage('Server error.');\n\t\t} finally {\n\t\t\tsetLoading(false);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"fixed inset-0 flex items-center justify-center bg-black/50 p-4\">\n\t\t\t<div className=\"bg-white rounded-lg shadow-xl w-full max-w-md p-6\">\n\t\t\t\t<h2 className=\"text-2xl font-semibold mb-4\">{isLoginMode ? 'Login' : 'Register'}</h2>\n\t\t\t\t<form onSubmit={handleSubmit} className=\"space-y-4\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700\">Username</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"mt-1 input-field\"\n\t\t\t\t\t\t\tplaceholder=\"Username\"\n\t\t\t\t\t\t\tvalue={username}\n\t\t\t\t\t\t\tonChange={e => setUsername(e.target.value)}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700\">Password</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tclassName=\"mt-1 input-field\"\n\t\t\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\tclassName=\"btn-primary w-full py-2 rounded-full font-semibold\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{loading ? 'Please wait...' : (isLoginMode ? 'Login' : 'Register')}\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t\t<p className=\"mt-4 text-sm text-gray-500\">\n\t\t\t\t\t{isLoginMode ? \"Don't have an account?\" : 'Already have an account?'}{' '}\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => setIsLoginMode(m => !m)}\n\t\t\t\t\t\tclassName=\"text-blue-600 font-semibold\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{isLoginMode ? 'Register' : 'Login'}\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t\t{message && <p className=\"mt-4 text-sm text-gray-700\">{message}</p>}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}