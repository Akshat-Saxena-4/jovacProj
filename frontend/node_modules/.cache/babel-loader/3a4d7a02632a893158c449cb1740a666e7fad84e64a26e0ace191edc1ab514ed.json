{"ast":null,"code":"import _objectSpread from\"/home/stuban/Downloads/Minor project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";export const apiBase='http://localhost:3001'||'';// export const apiBase = process.env.REACT_APP_API_BASE || '';\nexport function getToken(){return localStorage.getItem('token');}export function setToken(token){if(token){localStorage.setItem('token',token);}else{localStorage.removeItem('token');}}function authHeaders(){const token=getToken();return token?{Authorization:\"Bearer \".concat(token)}:{};}export async function apiGet(path){const res=await fetch(\"\".concat(apiBase).concat(path),{method:'GET',headers:_objectSpread({'Content-Type':'application/json'},authHeaders())});if(!res.ok)throw new Error(await res.text());return res.json();}export async function apiPost(path,body){let withAuth=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;const headers={'Content-Type':'application/json'};if(withAuth)Object.assign(headers,authHeaders());const res=await fetch(\"\".concat(apiBase).concat(path),{method:'POST',headers,body:JSON.stringify(body)});if(!res.ok)throw new Error(await res.text());return res.json();}export async function apiDelete(path){const res=await fetch(\"\".concat(apiBase).concat(path),{method:'DELETE',headers:_objectSpread({'Content-Type':'application/json'},authHeaders())});if(!res.ok)throw new Error(await res.text());return res.json();}export async function login(username,password){return apiPost('/api/login',{username,password},false);}export async function register(username,password){return apiPost('/api/register',{username,password},false);}export async function fetchAuthStatus(){return apiGet('/api/auth_status');}export async function fetchTransactions(){return apiGet('/api/transactions');}export async function addTransaction(payload){return apiPost('/api/transactions',payload);}export async function resetTransactions(){return apiDelete('/api/transactions/reset');}export async function fetchBudget(){return apiGet('/api/budget');}export async function setBudget(amount){return apiPost('/api/budget',{amount});}","map":{"version":3,"names":["apiBase","getToken","localStorage","getItem","setToken","token","setItem","removeItem","authHeaders","Authorization","concat","apiGet","path","res","fetch","method","headers","_objectSpread","ok","Error","text","json","apiPost","body","withAuth","arguments","length","undefined","Object","assign","JSON","stringify","apiDelete","login","username","password","register","fetchAuthStatus","fetchTransactions","addTransaction","payload","resetTransactions","fetchBudget","setBudget","amount"],"sources":["/home/stuban/Downloads/Minor project/frontend/src/api.js"],"sourcesContent":["export const apiBase = 'http://localhost:3001' || '';\n// export const apiBase = process.env.REACT_APP_API_BASE || '';\n\nexport function getToken() {\n\treturn localStorage.getItem('token');\n}\n\nexport function setToken(token) {\n\tif (token) {\n\t\tlocalStorage.setItem('token', token);\n\t} else {\n\t\tlocalStorage.removeItem('token');\n\t}\n}\n\nfunction authHeaders() {\n\tconst token = getToken();\n\treturn token ? { Authorization: `Bearer ${token}` } : {};\n}\n\nexport async function apiGet(path) {\n\tconst res = await fetch(`${apiBase}${path}`, {\n\t\tmethod: 'GET',\n\t\theaders: { 'Content-Type': 'application/json', ...authHeaders() }\n\t});\n\tif (!res.ok) throw new Error(await res.text());\n\treturn res.json();\n}\n\nexport async function apiPost(path, body, withAuth = true) {\n\tconst headers = { 'Content-Type': 'application/json' };\n\tif (withAuth) Object.assign(headers, authHeaders());\n\tconst res = await fetch(`${apiBase}${path}`, {\n\t\tmethod: 'POST',\n\t\theaders,\n\t\tbody: JSON.stringify(body)\n\t});\n\tif (!res.ok) throw new Error(await res.text());\n\treturn res.json();\n}\n\nexport async function apiDelete(path) {\n\tconst res = await fetch(`${apiBase}${path}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: { 'Content-Type': 'application/json', ...authHeaders() }\n\t});\n\tif (!res.ok) throw new Error(await res.text());\n\treturn res.json();\n}\n\nexport async function login(username, password) {\n\treturn apiPost('/api/login', { username, password }, false);\n}\n\nexport async function register(username, password) {\n\treturn apiPost('/api/register', { username, password }, false);\n}\n\nexport async function fetchAuthStatus() {\n\treturn apiGet('/api/auth_status');\n}\n\nexport async function fetchTransactions() {\n\treturn apiGet('/api/transactions');\n}\n\nexport async function addTransaction(payload) {\n\treturn apiPost('/api/transactions', payload);\n}\n\nexport async function resetTransactions() {\n\treturn apiDelete('/api/transactions/reset');\n}\n\nexport async function fetchBudget() {\n\treturn apiGet('/api/budget');\n}\n\nexport async function setBudget(amount) {\n\treturn apiPost('/api/budget', { amount });\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}