{"ast":null,"code":"export const apiBase = 'http://localhost:8000' || '';\n// export const apiBase = process.env.REACT_APP_API_BASE || '';\n\nexport function getToken() {\n  return localStorage.getItem('token');\n}\nexport function setToken(token) {\n  if (token) {\n    localStorage.setItem('token', token);\n  } else {\n    localStorage.removeItem('token');\n  }\n}\nfunction authHeaders() {\n  const token = getToken();\n  return token ? {\n    Authorization: `Bearer ${token}`\n  } : {};\n}\nexport async function apiGet(path) {\n  const res = await fetch(`${apiBase}${path}`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders()\n    }\n  });\n  if (!res.ok) throw new Error(await res.text());\n  return res.json();\n}\nexport async function apiPost(path, body, withAuth = true) {\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  if (withAuth) Object.assign(headers, authHeaders());\n  const res = await fetch(`${apiBase}${path}`, {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(body)\n  });\n  if (!res.ok) throw new Error(await res.text());\n  return res.json();\n}\nexport async function apiDelete(path) {\n  const res = await fetch(`${apiBase}${path}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders()\n    }\n  });\n  if (!res.ok) throw new Error(await res.text());\n  return res.json();\n}\nexport async function login(username, password) {\n  return apiPost('/api/login', {\n    username,\n    password\n  }, false);\n}\nexport async function register(firstName, lastName, email, username, password) {\n  return apiPost('/api/register', {\n    username,\n    password\n  }, false);\n}\nexport async function fetchAuthStatus() {\n  return apiGet('/api/auth_status');\n}\nexport async function fetchTransactions() {\n  return apiGet('/api/transactions');\n}\nexport async function addTransaction(payload) {\n  return apiPost('/api/transactions', payload);\n}\nexport async function resetTransactions() {\n  return apiDelete('/api/transactions/reset');\n}\nexport async function fetchBudget() {\n  return apiGet('/api/budget');\n}\nexport async function setBudget(amount) {\n  return apiPost('/api/budget', {\n    amount\n  });\n}","map":{"version":3,"names":["apiBase","getToken","localStorage","getItem","setToken","token","setItem","removeItem","authHeaders","Authorization","apiGet","path","res","fetch","method","headers","ok","Error","text","json","apiPost","body","withAuth","Object","assign","JSON","stringify","apiDelete","login","username","password","register","firstName","lastName","email","fetchAuthStatus","fetchTransactions","addTransaction","payload","resetTransactions","fetchBudget","setBudget","amount"],"sources":["/home/stuban/Downloads/Minor project/frontend/src/api.js"],"sourcesContent":["export const apiBase = 'http://localhost:8000' || '';\n// export const apiBase = process.env.REACT_APP_API_BASE || '';\n\nexport function getToken() {\n\treturn localStorage.getItem('token');\n}\n\nexport function setToken(token) {\n\tif (token) {\n\t\tlocalStorage.setItem('token', token);\n\t} else {\n\t\tlocalStorage.removeItem('token');\n\t}\n}\n\nfunction authHeaders() {\n\tconst token = getToken();\n\treturn token ? { Authorization: `Bearer ${token}` } : {};\n}\n\nexport async function apiGet(path) {\n\tconst res = await fetch(`${apiBase}${path}`, {\n\t\tmethod: 'GET',\n\t\theaders: { 'Content-Type': 'application/json', ...authHeaders() }\n\t});\n\tif (!res.ok) throw new Error(await res.text());\n\treturn res.json();\n}\n\nexport async function apiPost(path, body, withAuth = true) {\n\tconst headers = { 'Content-Type': 'application/json' };\n\tif (withAuth) Object.assign(headers, authHeaders());\n\tconst res = await fetch(`${apiBase}${path}`, {\n\t\tmethod: 'POST',\n\t\theaders,\n\t\tbody: JSON.stringify(body)\n\t});\n\tif (!res.ok) throw new Error(await res.text());\n\treturn res.json();\n}\n\nexport async function apiDelete(path) {\n\tconst res = await fetch(`${apiBase}${path}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: { 'Content-Type': 'application/json', ...authHeaders() }\n\t});\n\tif (!res.ok) throw new Error(await res.text());\n\treturn res.json();\n}\n\nexport async function login(username, password) {\n\treturn apiPost('/api/login', { username, password }, false);\n}\n\nexport async function register(firstName, lastName, email, username, password) {\n\treturn apiPost('/api/register', { username, password }, false);\n}\n\nexport async function fetchAuthStatus() {\n\treturn apiGet('/api/auth_status');\n}\n\nexport async function fetchTransactions() {\n\treturn apiGet('/api/transactions');\n}\n\nexport async function addTransaction(payload) {\n\treturn apiPost('/api/transactions', payload);\n}\n\nexport async function resetTransactions() {\n\treturn apiDelete('/api/transactions/reset');\n}\n\nexport async function fetchBudget() {\n\treturn apiGet('/api/budget');\n}\n\nexport async function setBudget(amount) {\n\treturn apiPost('/api/budget', { amount });\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}