{"ast":null,"code":"import axios from'axios';// Configuration\nexport const apiBase=process.env.NODE_ENV==='production'?''// Empty string for same-origin requests in production\n:'https://fintrack-3d4m.onrender.com';// Create Axios instance with default config\nconst apiClient=axios.create({baseURL:apiBase,headers:{'Content-Type':'application/json'},withCredentials:true,// Enable sending cookies in cross-origin requests\n// Optional: timeout after 10 seconds\ntimeout:10000});// --- TOKEN MANAGEMENT ---\nexport function getToken(){return localStorage.getItem('token');}export function setToken(token){if(token){localStorage.setItem('token',token);}else{localStorage.removeItem('token');}}// --- AXIOS INTERCEPTORS ---\n// 1. Request Interceptor: Auto-attach token\napiClient.interceptors.request.use(config=>{const token=getToken();// If token exists, attach it to the Authorization header\nif(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// 2. Response Interceptor: Centralized error handling and data extraction\napiClient.interceptors.response.use(response=>{// Return just the data to simplify calls in components\nreturn response.data;},error=>{// Handle standard HTTP errors\nlet errorMessage='An unexpected error occurred.';if(error.response){var _error$response$data;// Server responded with a status code outside the 2xx range\n// Try to get the specific error message sent by the server (e.g., res.status(400).send(\"Invalid password\"))\nerrorMessage=((_error$response$data=error.response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.response.data||error.response.statusText;// Optional: Handle specific status codes globally (e.g., auto-logout on 401)\nif(error.response.status===401){// setToken(null); \n// window.location.href = '/login';\n}}else if(error.request){// The request was made but no response was received (network error, server down)\nerrorMessage='Network error. Please check your connection.';}else{// Something happened in setting up the request\nerrorMessage=error.message;}// Reject the promise with a clean error object or string\n// We throw an Error object so components can catch it easily: catch (err) { setText(err.message) }\nreturn Promise.reject(new Error(errorMessage));});// --- API METHODS ---\n// Auth\nexport function login(username,password){return apiClient.post('/api/login',{username,password});}export function register(firstName,lastName,email,username,password){return apiClient.post('/api/register',{firstName,lastName,email,username,password});}export function fetchAuthStatus(){return apiClient.get('/api/auth_status');}// Transactions\nexport function fetchTransactions(){return apiClient.get('/api/transactions');}export function addTransaction(payload){// payload = { description, amount, type, category }\nreturn apiClient.post('/api/transactions',payload);}export function deleteTransaction(id){return apiClient.delete(\"/api/transactions/\".concat(id));}export function resetTransactions(){return apiClient.delete('/api/transactions/reset');}// Budget\nexport function fetchBudget(){return apiClient.get('/api/budget');}export function setBudget(amount){return apiClient.post('/api/budget',{amount});}export function AdivisorAI(){return apiClient.get('/api/coach');}","map":{"version":3,"names":["axios","apiBase","process","env","NODE_ENV","apiClient","create","baseURL","headers","withCredentials","timeout","getToken","localStorage","getItem","setToken","token","setItem","removeItem","interceptors","request","use","config","Authorization","concat","error","Promise","reject","response","data","errorMessage","_error$response$data","message","statusText","status","Error","login","username","password","post","register","firstName","lastName","email","fetchAuthStatus","get","fetchTransactions","addTransaction","payload","deleteTransaction","id","delete","resetTransactions","fetchBudget","setBudget","amount","AdivisorAI"],"sources":["C:/Users/aksha/Downloads/Telegram Desktop/aksaux/Minor project/frontend/src/api.js"],"sourcesContent":["import axios from 'axios';\n\n// Configuration\nexport const apiBase =  (\n    process.env.NODE_ENV === 'production' \n        ? '' // Empty string for same-origin requests in production\n        : 'https://fintrack-3d4m.onrender.com'\n);\n\n// Create Axios instance with default config\nconst apiClient = axios.create({\n    baseURL: apiBase,\n    headers: {\n        'Content-Type': 'application/json',\n    },\n    withCredentials: true, // Enable sending cookies in cross-origin requests\n    // Optional: timeout after 10 seconds\n    timeout: 10000,\n});\n\n// --- TOKEN MANAGEMENT ---\nexport function getToken() {\n    return localStorage.getItem('token');\n}\n\nexport function setToken(token) {\n    if (token) {\n        localStorage.setItem('token', token);\n    } else {\n        localStorage.removeItem('token');\n    }\n}\n\n// --- AXIOS INTERCEPTORS ---\n\n// 1. Request Interceptor: Auto-attach token\napiClient.interceptors.request.use(\n    (config) => {\n        const token = getToken();\n        // If token exists, attach it to the Authorization header\n        if (token) {\n            config.headers.Authorization = `Bearer ${token}`;\n        }\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// 2. Response Interceptor: Centralized error handling and data extraction\napiClient.interceptors.response.use(\n    (response) => {\n        // Return just the data to simplify calls in components\n        return response.data;\n    },\n    (error) => {\n        // Handle standard HTTP errors\n        let errorMessage = 'An unexpected error occurred.';\n\n        if (error.response) {\n            // Server responded with a status code outside the 2xx range\n            // Try to get the specific error message sent by the server (e.g., res.status(400).send(\"Invalid password\"))\n            errorMessage = error.response.data?.message || error.response.data || error.response.statusText;\n\n            // Optional: Handle specific status codes globally (e.g., auto-logout on 401)\n            if (error.response.status === 401) {\n                // setToken(null); \n                // window.location.href = '/login';\n            }\n        } else if (error.request) {\n            // The request was made but no response was received (network error, server down)\n            errorMessage = 'Network error. Please check your connection.';\n        } else {\n            // Something happened in setting up the request\n            errorMessage = error.message;\n        }\n\n        // Reject the promise with a clean error object or string\n        // We throw an Error object so components can catch it easily: catch (err) { setText(err.message) }\n        return Promise.reject(new Error(errorMessage));\n    }\n);\n\n// --- API METHODS ---\n\n// Auth\nexport function login(username, password) {\n    return apiClient.post('/api/login', { username, password });\n}\n\nexport function register(firstName, lastName, email, username, password) {\n    return apiClient.post('/api/register', { \n        firstName, \n        lastName, \n        email, \n        username, \n        password \n    });\n}\n\nexport function fetchAuthStatus() {\n    return apiClient.get('/api/auth_status');\n}\n\n// Transactions\nexport function fetchTransactions() {\n    return apiClient.get('/api/transactions');\n}\n\nexport function addTransaction(payload) {\n    // payload = { description, amount, type, category }\n    return apiClient.post('/api/transactions', payload);\n}\n\nexport function deleteTransaction(id) {\n    return apiClient.delete(`/api/transactions/${id}`);\n}\n\nexport function resetTransactions() {\n    return apiClient.delete('/api/transactions/reset');\n}\n\n// Budget\nexport function fetchBudget() {\n    return apiClient.get('/api/budget');\n}\n\nexport function setBudget(amount) {\n    return apiClient.post('/api/budget', { amount });\n}\n\nexport function AdivisorAI() {\n    return apiClient.get('/api/coach');\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}